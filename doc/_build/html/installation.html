

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installing Nighres &mdash; Nighres 1.1.0b1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/adapt_sphinx_rtd.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Nighres usage examples" href="auto_examples/index.html" />
    <link rel="prev" title="Welcome to Nighres!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/nighres_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installing Nighres</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-pypi">From PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-github">From Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-nighres">Build Nighres</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-the-installation">Testing the installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-dependencies">Optional dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#missing-java-libraries">Missing Java libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#missing-python-packages">Missing Python packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Nighres usage examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules and Functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="brain/index.html">Brain</a></li>
<li class="toctree-l1"><a class="reference internal" href="cortex/index.html">Cortex</a></li>
<li class="toctree-l1"><a class="reference internal" href="data/index.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="filtering/index.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="intensity/index.html">Intensity</a></li>
<li class="toctree-l1"><a class="reference internal" href="io/index.html">Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="laminar/index.html">Laminar</a></li>
<li class="toctree-l1"><a class="reference internal" href="microscopy/index.html">Microscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="registration/index.html">Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="shape/index.html">Shape</a></li>
<li class="toctree-l1"><a class="reference internal" href="statistics/index.html">Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="surface/index.html">Surface</a></li>
</ul>
<p class="caption"><span class="caption-text">Good to know</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_formats.html">Data handling and formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="saving.html">Saving outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="levelsets.html">Levelsets</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developers/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers/setup.html">Setting up</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers/wrapping_cbstools.html">Wrapping an existing CBS Tools class</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers/python_function.html">Adding a new Python function</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers/examples.html">Writing examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers/docs.html">Adapting the docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers/pr.html">Making a Pull Request</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nighres</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installing Nighres</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-nighres">
<h1>Installing Nighres<a class="headerlink" href="#installing-nighres" title="Permalink to this headline">¶</a></h1>
<p>Please see <a class="reference internal" href="#trouble"><span class="std std-ref">Troubleshooting</span></a> if you run into errors during installation.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>To build Nighres you need:</p>
<ul class="simple">
<li>Python 3.5 or higher</li>
<li>Java JDK 1.7 or higher</li>
<li><a class="reference external" href="https://pypi.org/project/JCC/">JCC 3.0</a> or higher</li>
</ul>
<p>The following Python packages are automatically installed with Nighres</p>
<ul class="simple">
<li><a class="reference external" href="http://www.numpy.org/">numpy</a></li>
<li><a class="reference external" href="http://nipy.org/nibabel/">nibabel</a></li>
<li><a class="reference external" href="https://pypi.org/project/psutil/">psutils</a></li>
</ul>
<p>For further dependencies of specific interfaces see <a class="reference internal" href="#add-deps"><span class="std std-ref">Optional dependencies</span></a>.</p>
</div>
<div class="section" id="from-pypi">
<h2>From PyPI<a class="headerlink" href="#from-pypi" title="Permalink to this headline">¶</a></h2>
<p>You can download the latest stable release of Nighres from <a class="reference external" href="https://pypi.python.org/pypi/nighres">PyPI</a>.</p>
<p>Because parts of the package have to be built locally it is currently not possible to use <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> directly from PyPI. Instead, please download and unpack the tarball to <a class="reference internal" href="#build-nighres"><span class="std std-ref">Build Nighres</span></a>. (Or use the <a class="reference internal" href="#docker-image"><span class="std std-ref">Docker image</span></a>)</p>
</div>
<div class="section" id="from-github">
<h2>From Github<a class="headerlink" href="#from-github" title="Permalink to this headline">¶</a></h2>
<p>You can also get the latest version from Github</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">nighres</span><span class="o">/</span><span class="n">nighres</span>
</pre></div>
</div>
<p>Or download and unpack the zip file from Github under <strong>Clone and download</strong> -&gt;
<strong>Download ZIP</strong></p>
</div>
<div class="section" id="build-nighres">
<span id="id1"></span><h2>Build Nighres<a class="headerlink" href="#build-nighres" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Make sure you have Java JDK and JCC installed and set up. You will likely need to point the JCC_JDK variable to you Java JDK installation, e.g on a Debian/Ubuntu amd64 system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">openjdk</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="n">jdk</span>
<span class="n">export</span> <span class="n">JCC_JDK</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mi">8</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="n">amd64</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">jcc</span>
</pre></div>
</div>
</li>
<li><p class="first">Navigate to the Nighres directory you downloaded and unpacked, and run the build script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</li>
<li><p class="first">Install the Python package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="testing-the-installation">
<h2>Testing the installation<a class="headerlink" href="#testing-the-installation" title="Permalink to this headline">¶</a></h2>
<p>You can often catch installation problems by simply import Nighres in Python. Make sure to navigate out of the directory from which you installed to make sure Nighres has actually been installed correctly and can be accessed from any location</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import nighres&quot;</span>
</pre></div>
</div>
<p>If that works, you can try running one of the examples. You can find them inside the unpacked Nighres directory, in the subdirectory <em>examples</em>. Alternatively, you can also download the <a class="reference internal" href="auto_examples/index.html#examples-index"><span class="std std-ref">examples</span></a> from the online documentation.</p>
</div>
<div class="section" id="docker">
<span id="docker-image"></span><h2>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h2>
<p>To quickly try out nighres in a preset, batteries-included environment, you can use the included Dockerfile, which includes Ubuntu 14 Trusty, openJDK-8, nighres, and Jupyter Notebook. The only thing you need to install is <a class="reference external" href="https://www.docker.com/">Docker</a>, a lightweight container platform that runs on Linux, Windows and Mac OS X.</p>
<p>To build the Docker image, do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">nighres</span><span class="o">/</span><span class="n">nighres</span>
<span class="n">cd</span> <span class="n">nighres</span>
<span class="n">docker</span> <span class="n">build</span> <span class="o">.</span> <span class="o">-</span><span class="n">t</span> <span class="n">nighres</span>
</pre></div>
</div>
<p>To run the Docker container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8888</span><span class="p">:</span><span class="mi">8888</span> <span class="n">nighres</span>
</pre></div>
</div>
<p>Now go with your browser to <a class="reference external" href="http://localhost:8888">http://localhost:8888</a> to start a notebook. You should be able
to import nighres by entering:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nighres</span>
</pre></div>
</div>
<p>into the first cell of your notebook.</p>
<p>Usually you also want to have access to some data when you run nighres. You can grant the Docker container
access to a data folder on your host OS by using the <cite>-v</cite> tag when you start the container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">me</span><span class="o">/</span><span class="n">my_data</span><span class="p">:</span><span class="o">/</span><span class="n">data</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8888</span><span class="p">:</span><span class="mi">8888</span> <span class="n">nighres</span>
</pre></div>
</div>
<p>Now, in your notebook you will be able to access your data on the path <cite>/data</cite></p>
</div>
<div class="section" id="optional-dependencies">
<span id="add-deps"></span><h2>Optional dependencies<a class="headerlink" href="#optional-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Working with surface mesh files</p>
<ul class="simple">
<li><a class="reference external" href="https://pandas.pydata.org/">pandas</a></li>
</ul>
<p>Using the registration tools</p>
<ul class="simple">
<li><a class="reference external" href="https://nipype.readthedocs.io/en/latest/">nipype</a></li>
<li><a class="reference external" href="https://github.com/ANTsX/ANTs">ANTs</a></li>
</ul>
<p>Plotting in the examples</p>
<ul class="simple">
<li><a class="reference external" href="http://nilearn.github.io/">Nilearn</a> and its dependencies, if Nilearn is not installed, plotting in the examples will be skipped and you can view the results in any other nifti viewer</li>
</ul>
<p>Using the docker image</p>
<ul class="simple">
<li><a class="reference external" href="https://www.docker.com/">Docker</a></li>
</ul>
<p>Building the documentation</p>
<ul class="simple">
<li><a class="reference external" href="http://www.sphinx-doc.org/en/stable/">sphinx</a></li>
<li><a class="reference external" href="https://sphinx-gallery.github.io/">sphinx-gallery</a></li>
<li><a class="reference external" href="http://matplotlib.org/">matplotlib</a></li>
<li><a class="reference external" href="http://docs.readthedocs.io/en/latest/theme.html">sphinx-rtd-theme</a> (pip install sphinx-rtd-theme)</li>
<li><a class="reference external" href="https://python-pillow.org/">pillow</a> (pip install pillow)</li>
<li><a class="reference external" href="https://pypi.org/project/mock/">mock</a></li>
</ul>
</div>
<div class="section" id="troubleshooting">
<span id="trouble"></span><h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>If you experience errors not listed here, please help us by reporting them through <a class="reference external" href="neurostars.org">neurostars.org</a> using the tag <strong>nighres</strong>, or on <a class="reference external" href="https://github.com/nighres/nighres/issues">github</a>. Or if you solve them yourself help others by contributing your solution here (see <a class="reference internal" href="developers/index.html#devguide"><span class="std std-ref">Developers guide</span></a>)</p>
<div class="section" id="missing-java-libraries">
<h3>Missing Java libraries<a class="headerlink" href="#missing-java-libraries" title="Permalink to this headline">¶</a></h3>
<p>If you get errors regarding missing java libraries (such as ljvm/libjvm or ljava/libjava), although you install Java JDK, it means that JCC does not find the libraries. It can help to search for the “missing” library and make a symbolic link to it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">find</span> <span class="o">/</span> <span class="o">-</span><span class="nb">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">name</span> <span class="n">libjvm</span><span class="o">.</span><span class="n">so</span>
<span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="n">amd64</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">libjvm</span><span class="o">.</span><span class="n">so</span>
<span class="n">sudo</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">openjdk</span><span class="o">-</span><span class="n">amd64</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">libjvm</span><span class="o">.</span><span class="n">so</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libjvm</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
</div>
<div class="section" id="missing-python-packages">
<h3>Missing Python packages<a class="headerlink" href="#missing-python-packages" title="Permalink to this headline">¶</a></h3>
<p>If you get errors about Python packages not being installed, it might be that you are trying to run a function that requires <a class="reference internal" href="#add-deps"><span class="std std-ref">Optional dependencies</span></a>. If packages are reported missing that you think you have installed, make sure that they are installed under the same python installation as nighres. They should be listed when you run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="nb">list</span>
</pre></div>
</div>
<p>If they aren’t, install them using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">&lt;</span><span class="n">package_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If there is still confusion, make sure nighres is installed in the same directory that your python3 -m pip command points to. These two commands should give the same base directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;import nighres; print(nighres.__file__)&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="auto_examples/index.html" class="btn btn-neutral float-right" title="Nighres usage examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Nighres!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, The Nighres authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>